!function(t){function e(){this.promotion=null,this.initializeComplete=!1,this.init=function(t){for(var e in t)this[e]=t[e];if(this.key=this.promotionId+""+Math.floor(1e6*Math.random()),!1===this.initializeComplete){this.initializeDone=!0,this.polyfills(),this.fetchPromotion();var n=document.getElementsByTagName("head")[0],i=document.createElement("link");i.href="https://i.tryinteract.com/promotions/style.css",i.rel="stylesheet",i.type="text/css",n.appendChild(i)}},this.createRequest=function(t,e){var n=new XMLHttpRequest;return"withCredentials"in n?n.open(t,e,!0):"undefined"!=typeof XDomainRequest?(n=new XDomainRequest).open(t,e):n=null,n},this.fetchPromotion=function(){var t=this.createRequest("GET","https://interact-quiz-public-api.herokuapp.com/promotion/"+this.promotionId);if(!t)return null;"withCredentials"in t?t.onreadystatechange=function(){4==t.readyState&&200==t.status&&this.fetchPromotionCallback(t.responseText)}.bind(this):"undefined"!=typeof XDomainRequest&&(t.onload=function(){this.fetchPromotionCallback(t.responseText)}.bind(this)),t.send()},this.fetchPromotionCallback=function(t){this.promotion=this.parseResponse(t),this.promotion&&this.buildPromotions()},this.parseResponse=function(t){var e=null;if(t)try{e=JSON.parse(t)}catch(t){console.log("Interact Error: ",t.message)}return e},this.buildPromotions=function(){var t={},e=this.promotion.methods.map(function(t){return t.type});this.settings=this.promotion.settings,this.methods={},e.forEach(function(t){this.methods[t]=this.promotion.methods.find(function(e){return e.type===t})}.bind(this)),this.isActive(this.methods.popup)&&this.isVisible(this.methods.popup)&&(this.methods.popup.embedKey=this.methods.popup.app_id+""+Math.floor(1e6*Math.random()),t.popup=this.generatePopup(this.methods.popup)),this.isActive(this.methods.bar)&&this.isVisible(this.methods.bar)&&(t.announcementBar=this.generateAnnouncementBar(this.methods.bar)),this.renderPromotions(t)},this.isActive=function(t){return!(!t||!t.active)},this.isVisible=function(t){var e=t.audiences&&t.audiences.length?t.audiences:null;return!e||-1!==e.map(this.inAudience.bind(this)).indexOf(!0)},this.inAudience=function(t){switch(t.type){case"url":return this.matchUrlRules(t);default:return!0}},this.matchUrlRules=function(t){var e=t.active&&t.rules&&t.rules.length?t.rules.map(this.matchUrlRule):null;if(!e)return!0;switch(t.match){case"all":return-1===e.indexOf(!1);case"one":return-1!==e.indexOf(!0);default:return!0}},this.matchUrlRule=function(t){var e=window.location.pathname.replace(/\/$/,""),n=t.value.replace(/\/$/,"");switch(t.type){case"equals":return e===n;case"x-equals":return e!==n;case"contains":return e.indexOf(n)>-1;case"x-contains":return-1===e.indexOf(n);default:return!0}},this.generatePopup=function(t){var e=t.settings?t.settings:{},n=e.bgColor?[e.bgColor.r,e.bgColor.g,e.bgColor.b,e.bgColor.a]:[0,0,0,.5],i=this.isiOs()?this.calcEmbedHeight():null,o=document.createElement("div"),r='<div id="interact-promotion-popup" style="background: rgba('+n.join()+');">';return r+='<div id="interact-promotion-popup-close"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><path fill="#ffffff" d="M231.6 256l130.1-130.1c4.7-4.7 4.7-12.3 0-17l-22.6-22.6c-4.7-4.7-12.3-4.7-17 0L192 216.4 61.9 86.3c-4.7-4.7-12.3-4.7-17 0l-22.6 22.6c-4.7 4.7-4.7 12.3 0 17L152.4 256 22.3 386.1c-4.7 4.7-4.7 12.3 0 17l22.6 22.6c4.7 4.7 12.3 4.7 17 0L192 295.6l130.1 130.1c4.7 4.7 12.3 4.7 17 0l22.6-22.6c4.7-4.7 4.7-12.3 0-17L231.6 256z"></path></svg></div>',r+='<div id="interact-promotion-popup-overlay" style="width: '+("poll"===t.appType?"600":"800")+"px;"+("100%"==i?"height:calc(100% - 100px);":"")+'">',r+='<div id="interact-'+t.embedKey+'" style="font-size:0!important;line-height:0!important;'+("100%"==i?"height:100%;":"")+'"></div>',r+="</div></div>",o.innerHTML=r,o.firstChild},this.generateAnnouncementBar=function(t){var e=t.settings?t.settings:{},n=e.bgColor?[e.bgColor.r,e.bgColor.g,e.bgColor.b,e.bgColor.a]:[55,150,219,1],i=e.fontColor?[e.fontColor.r,e.fontColor.g,e.fontColor.b,e.fontColor.a]:[255,255,255,1],o=e.btnColor?[e.btnColor.r,e.btnColor.g,e.btnColor.b,e.btnColor.a]:[249,144,80,1],r=e.btnFontColor?[e.btnFontColor.r,e.btnFontColor.g,e.btnFontColor.b,e.btnFontColor.a]:[255,255,255,1],s=this.settings?this.settings.powered_by:null,a=document.createElement("div"),p='<div id="interact-promotion-announcement-bar"'+("fixed"===e.position?' class="interact-promotion-announcement-bar-fixed"':"")+'style="background:rgba('+n.join()+');">';return p+='<p class="interact-promotion-announcement-bar-p" style="color:rgba('+i.join()+');">'+e.text+"</p>",p+='<a href="'+(t.btnLink?t.btnLink:"https://"+(t.appType?t.appType:"")+".tryinteract.com/#/"+t.app_id)+'" id="interact-promotion-announcement-bar-btn" style="background:rgba('+o.join()+");color:rgba("+r.join()+');">'+e.btnText+"</a>",p+='<a href="#" id="interact-promotion-announcement-bar-close"><span>x</span></a>',p+=s?'<a href="https://www.tryinteract.com/?utm_source=Powered%20By%20Link" id="interact-promotion-announcement-bar-logo" target="_blank"><img src="https://i.tryinteract.com/images/icon.svg" width="30" height="30" style="vertical-align:middle;"></a>':"",p+="</div>",a.innerHTML=p,a.firstChild},this.renderPromotions=function(t){document&&document.body&&document.body.appendChild?(t.popup&&this.renderPopup(t.popup,this.methods.popup),t.announcementBar&&this.renderAnnouncementBar(t.announcementBar)):setTimeout(this.renderPromotions,50)},this.renderPopup=function(t,e){var n=e.settings?e.settings:{};n.hiatus&&this.getCookie("_interact_promotion_"+this.promotion.sid+"_popup_"+e.app_id).length||document.getElementById("interact-promotion-popup")||(document.body.appendChild(t),setTimeout(function(){if(this.renderEmbed(e),this.addEvent(document.getElementById("interact-promotion-popup"),"click",this.closePopup.bind(this),!0),this.animate("interact-promotion-popup","interact-promotion-popup-shown",function(){this.animate("interact-promotion-popup","interact-promotion-popup-visible")}.bind(this)),n.hiatus){parseInt(n.hiatus);this.setCookie("_interact_promotion_"+this.promotion.sid+"_popup_"+e.app_id,"shown",n.hiatus)}}.bind(this),n.timer?1e3*parseInt(n.timer):50))},this.closePopup=function(t){t.preventDefault?t.preventDefault():t.returnValue=!1;var e=document.getElementById("interact-promotion-popup");this.animate("interact-promotion-popup","interact-promotion-popup-visible"),setTimeout(function(){e.parentNode.removeChild(e)},500)},this.renderAnnouncementBar=function(t){var e=this.methods.bar,n=e.settings?e.settings:{};n.hiatus&&this.getCookie("_interact_promotion_"+this.promotion.sid+"_bar_"+e.app_id).length||document.getElementById("interact-promotion-announcement-bar")||(document.body.insertBefore(t,document.body.firstChild),t.style.marginTop="-"+t.offsetHeight+"px",setTimeout(function(){if(this.animate("interact-promotion-announcement-bar","interact-promotion-announcement-bar-visible"),this.addEvent(document.getElementById("interact-promotion-announcement-bar-close"),"click",this.closeAnnouncementBar.bind(this),!0),this.addEvent(document.getElementById("interact-promotion-announcement-bar-btn"),"click",this.clickAnnouncementBar.bind(this)),this.addEvent(document.getElementById("interact-promotion-announcement-bar-btn"),"mouseenter",this.hoverAnnouncementBar.bind(this)),this.addEvent(document.getElementById("interact-promotion-announcement-bar-btn"),"mouseleave",this.hoverAnnouncementBar.bind(this)),n.hiatus){parseInt(n.hiatus);this.setCookie("_interact_promotion_"+this.promotion.sid+"_bar_"+e.app_id,"shown",n.hiatus)}}.bind(this),n.timer?1e3*parseInt(n.timer):50))},this.clickAnnouncementBar=function(e){e.preventDefault?e.preventDefault():e.returnValue=!1;var n=this.methods.bar,i=n.settings?n.settings:{};if(i.btnAction&&"popup"!==i.btnAction)t.location.href=i.btnAction;else{var o={app_id:this.methods.bar.app_id,appType:n.appType,embedKey:this.methods.bar.app_id+""+Math.floor(1e6*Math.random()),settings:{disableCover:!!i.disableCover,redirectHost:!!i.redirectHost}},r=this.generatePopup(o);this.renderPopup(r,o)}},this.hoverAnnouncementBar=function(t){var e=this.methods.bar,n=e.settings?e.settings:{},i=n.btnColor?[n.btnColor.r,n.btnColor.g,n.btnColor.b,n.btnColor.a]:[249,144,80,1],o=n.btnColor?[n.btnColor.r-10,n.btnColor.g-10,n.btnColor.b-10,n.btnColor.a]:[239,134,70,1],r="mouseleave"===t.type?i:o;document.getElementById("interact-promotion-announcement-bar-btn").style.background="rgba("+r.join()+")"},this.closeAnnouncementBar=function(t){t.preventDefault?t.preventDefault():t.returnValue=!1;var e=document.getElementById("interact-promotion-announcement-bar");this.animate("interact-promotion-announcement-bar","interact-promotion-announcement-bar-visible"),setTimeout(function(){e.parentNode.removeChild(e)},500)},this.animate=function(t,e,n){var i=document.getElementById(t);i.classList?i.classList:i.className.split(" ");setTimeout(function(){if(i.classList)i.classList.toggle(e);else{var t=i.className.split(" "),o=t.indexOf(e);-1!=o?t.splice(o,1):t.push(e),i.className=t.join(" ")}if(n)return n()},50)},this.renderEmbed=function(t){var e=document.createElement("script");e.type="text/javascript";var n=t.settings?t.settings:{},i=this.settings?this.settings.powered_by:null,o=!this.isiOs(),r=this.embedOptions&&this.embedOptions.user?this.getUserString(this.embedOptions.user):null,s=t.embedKey,a="var app_"+s+';(function(d, t) { var s = d.createElement(t), options={"ref":"'+s+'","appId":"'+t.app_id+'","width":"'+("poll"===t.appType?"600":"800")+'","height":"'+(o?"400":this.calcEmbedHeight())+'"'+(o?"":',"auto_resize":false')+',"async":true,'+(this.embedOptions&&this.embedOptions.user?'"user":'+r+",":"")+'"host":"'+(t.appType?t.appType:"")+'.tryinteract.com"'+(n.disableCover?',"no_cover":true':"")+(n.redirectHost?',"redirect_host":true':"")+(i?',"footer":"show"':"")+"}; s.src = 'https://i.tryinteract.com/embed/app.js'; s.onload = s.onreadystatechange = function() { var rs = this.readyState; if (rs) if (rs != 'complete') if (rs != 'loaded') return; try { app_"+s+" = new InteractApp();app_"+s+".initialize(options);app_"+s+".display(); } catch (e) {}}; var scr = d.getElementsByTagName(t)[0], par = scr.parentNode; par.insertBefore(s, scr);})(document, 'script');";try{e.appendChild(document.createTextNode(a)),document.body.appendChild(e)}catch(t){e.text=a,document.body.appendChild(e)}},this.getUserString=function(t){var e=0,n="{";for(var i in t)t.hasOwnProperty(i)&&(n+=(e>0?",":"")+'"'+i+'":"'+t[i]+'"'),e++;return n+="}"},this.isiOs=function(){return!!navigator.userAgent.match(/(iPod|iPhone|iPad)/i)},this.calcEmbedHeight=function(){var t=window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight;return t?t-100:"100%"},this.addEvent=function(t,e,n,i){t.attachEvent?(t["e"+e+n]=n,t[e+n]=function(){t["e"+e+n](window.event)},t.attachEvent("on"+e,t[e+n])):t.addEventListener(e,n,{once:!!i})},this.setCookie=function(t,e,n){var i=new Date;i.setTime(i.getTime()+24*n*60*60*1e3);var o="expires="+i.toUTCString();document.cookie=t+"="+e+";"+o+";path=/"},this.getCookie=function(t){for(var e=t+"=",n=document.cookie.split(";"),i=0;i<n.length;i++){for(var o=n[i];" "==o.charAt(0);)o=o.substring(1);if(0==o.indexOf(e))return o.substring(e.length,o.length)}return""},this.polyfills=function(){Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(t){if(null==this)throw new TypeError('"this" is null or not defined');var e=Object(this),n=e.length>>>0;if("function"!=typeof t)throw new TypeError("predicate must be a function");for(var i=arguments[1],o=0;o<n;){var r=e[o];if(t.call(i,r,o,e))return r;o++}}})}}!function(){for(var n=t.i_promo&&t.i_promo.q?t.i_promo.q:[],i=0;i<n.length;i++){var o=n.shift();"init"===(o.length?o[0]:null)&&(new e).init({promotionId:o.length>=2?o[1]:null,embedOptions:o.length>=3?o[2]:null})}}()}(window);